language: python
dist: xenial

python:
  - '3.7'

services:
  - postgresql

addons:
  postgresql: "11"
  apt:
    packages:
    - postgresql-11
    - postgresql-client-11
    - libgdal-dev
    - postgresql-11-postgis-2.5

env:
  global:
  - PGDATABASE=postgres
  - PGHOST=127.0.0.1
  - PGUSER=postgres
  - PGPASS=''
  - PGPORT=5432
  - DATABASE_URL=postgres://${PGUSER}:${PGPASS}@${PGHOST}:${PGPORT}/${PGDATABASE}

cache:
  pip: true

install:
  - pip install cookiecutter==1.6.0

script:
  - ./run_test.sh

notifications:
  email:
    on_success: change  # [always|never|change]
    on_failure: always  # [always|never|change]
